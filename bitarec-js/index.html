<div class="contenido-pagina">
    <!-- Hero Section -->
    <section class="dashboard-hero">
        <div class="welcome-section">
            <h1 id="welcome-title">Â¡Bienvenido!</h1>
            <div class="welcome-text">
                <p>Tu espacio personal para registrar, organizar y recordar cada paso de tu trabajo. Porque cada detalle merece quedar grabado.</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <h3>ğŸ“š BitÃ¡coras</h3>
                    <p class="stat-number" id="total-bitacoras">0</p>
                    <p class="stat-label">Total activas</p>
                </div>
                <div class="stat-card">
                    <h3>ğŸ“ Entradas</h3>
                    <p class="stat-number" id="total-entradas">0</p>
                    <p class="stat-label">Total registradas</p>
                </div>
                <div class="stat-card">
                    <h3>ğŸ•’ Hoy</h3>
                    <p class="stat-number" id="entradas-hoy">0</p>
                    <p class="stat-label">Entradas de hoy</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Actions Section -->
    <section class="actions-section">
        <h2>Â¿QuÃ© deseas hacer hoy?</h2>
        <div class="action-grid">
            <div class="action-card" onclick="cargarPagina('nueva-bitacora')">
                <h3>ğŸ“ Nueva BitÃ¡cora</h3>
                <p>Crear una nueva bitÃ¡cora para registrar tus actividades</p>
            </div>
            <div class="action-card" onclick="cargarPagina('mis-bitacoras')">
                <h3>ğŸ“š Mis BitÃ¡coras</h3>
                <p>Ver y gestionar todas tus bitÃ¡coras existentes</p>
            </div>
            <div class="action-card" onclick="cargarPagina('entradas-recientes')">
                <h3>ğŸ•’ Recientes</h3>
                <p>Revisar las entradas mÃ¡s recientes</p>
            </div>
            <div class="action-card" onclick="cargarPagina('buscar')">
                <h3>ğŸ” Buscar</h3>
                <p>Buscar en todos tus registros y bitÃ¡coras</p>
            </div>
            <div class="action-card" onclick="cargarPagina('exportar')">
                <h3>ğŸ“¤ Exportar</h3>
                <p>Exportar tus datos y bitÃ¡coras</p>
            </div>
            <div class="action-card" onclick="cargarPagina('configuracion')">
                <h3>âš™ï¸ ConfiguraciÃ³n</h3>
                <p>Gestionar tu cuenta y preferencias</p>
            </div>
            <div class="action-card" onclick="cargarPagina('papelera')">
                <h3>ğŸ—‘ï¸ Papelera</h3>
                <p>Elementos eliminados recientemente</p>
            </div>
            <div class="action-card" onclick="cargarPagina('ayuda')">
                <h3>â“ Ayuda</h3>
                <p>Centro de ayuda y soporte</p>
            </div>
        </div>
    </section>

    <!-- Info Sections -->
    <div class="info-sections">
        <div class="info-column">
            <h3>ğŸ“‹ MANUAL RÃPIDO</h3>
            <ul>
                <li onclick="mostrarNotificacion('GuÃ­a: Crear bitÃ¡cora', 'info')">Crear tu primera bitÃ¡cora</li>
                <li onclick="mostrarNotificacion('GuÃ­a: Agregar entradas', 'info')">Agregar entradas diarias</li>
                <li onclick="mostrarNotificacion('GuÃ­a: Organizar', 'info')">Organizar con etiquetas</li>
                <li onclick="mostrarNotificacion('GuÃ­a: Exportar', 'info')">Exportar tus registros</li>
                <li onclick="mostrarNotificacion('GuÃ­a: Privacidad', 'info')">Configurar privacidad</li>
            </ul>
        </div>

        <div class="info-column">
            <h3>â“ PREGUNTAS FRECUENTES</h3>
            <ul>
                <li onclick="mostrarNotificacion('Ve a Mis BitÃ¡coras â†’ Nueva BitÃ¡cora', 'info')">Â¿CÃ³mo crear una bitÃ¡cora?</li>
                <li onclick="mostrarNotificacion('Funcionalidad en desarrollo', 'info')">Â¿CÃ³mo compartir bitÃ¡coras?</li>
                <li onclick="mostrarNotificacion('Ve a Exportar y elige formato', 'info')">Â¿CÃ³mo exportar mis registros?</li>
                <li onclick="mostrarNotificacion('Ve a la Papelera para recuperar', 'info')">Â¿CÃ³mo recuperar bitÃ¡coras eliminadas?</li>
                <li onclick="mostrarNotificacion('Ve a ConfiguraciÃ³n â†’ Seguridad', 'info')">Â¿CÃ³mo cambiar mi contraseÃ±a?</li>
            </ul>
        </div>

        <div class="info-column">
            <h3>â„¹ï¸ ACERCA DE</h3>
            <ul>
                <li onclick="mostrarNotificacion('MisiÃ³n: Facilitar la organizaciÃ³n de registros...', 'info')">MisiÃ³n y VisiÃ³n</li>
                <li onclick="mostrarNotificacion('Desarrollado con â¤ï¸ para BITAREC', 'info')">Equipo de desarrollo</li>
                <li onclick="mostrarNotificacion('Contacto: soporte@bitarec.com', 'info')">Contacto y soporte</li>
                <li onclick="mostrarNotificacion('TÃ©rminos de servicio en desarrollo', 'info')">TÃ©rminos de servicio</li>
                <li onclick="mostrarNotificacion('PolÃ­tica de privacidad en desarrollo', 'info')">PolÃ­tica de privacidad</li>
            </ul>
        </div>
    </div>
</div>

<script>
// Cargar estadÃ­sticas al mostrar la pÃ¡gina
document.addEventListener('DOMContentLoaded', function() {
    cargarEstadisticas();
});

async function cargarEstadisticas() {
    try {
        const { BitacoraManager } = await import('../assets/js/bitacoras.js');
        const { EntradaManager } = await import('../assets/js/entradas.js');
        const { AuthManager } = await import('../assets/js/auth.js');

        const usuario = await AuthManager.getUsuarioActual();
        if (usuario) {
            document.getElementById('welcome-title').textContent = `Â¡Bienvenido ${usuario.usu_nombre}!`;
        }

        // Obtener bitÃ¡coras
        const bitacorasResult = await BitacoraManager.obtenerBitacorasUsuario();
        if (bitacorasResult.success) {
            document.getElementById('total-bitacoras').textContent = bitacorasResult.bitacoras.length;
        }

        // Obtener entradas recientes
        const entradasResult = await EntradaManager.obtenerEntradasRecientes(100);
        if (entradasResult.success) {
            const totalEntradas = entradasResult.entradas.length;
            document.getElementById('total-entradas').textContent = totalEntradas;

            // Contar entradas de hoy
            const hoy = new Date().toDateString();
            const entradasHoy = entradasResult.entradas.filter(entrada => {
                const fechaEntrada = new Date(entrada.ent_fecha_creacion).toDateString();
                return fechaEntrada === hoy;
            }).length;
            
            document.getElementById('entradas-hoy').textContent = entradasHoy;
        }
    } catch (error) {
        console.error('Error cargando estadÃ­sticas:', error);
    }
}
</script>
